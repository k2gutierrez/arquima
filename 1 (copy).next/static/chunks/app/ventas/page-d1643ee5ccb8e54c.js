(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[597],{8535:function(e,a,t){Promise.resolve().then(t.bind(t,5899))},5899:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return E}});var s=t(7437),n=t(2265),i=t(6691),l=t.n(i),r=t(1396),c=t.n(r),o=t(2781),d=t(4033),u=t(8686),m=t(1577),h=t(9942),x=t(4086),f=t(7829),g=t(2827),b=t(6648),p=t(8378);t(8431);var N=t(3710),v=t(8591),j=t(8775),A=t(1435),S=t(9817),I=t(3085);function E(){let[e,a]=(0,n.useState)("clientes"),{user:t,currentRol:i,currentName:r}=(0,o.Eu)(),E=(0,d.useRouter)(),[C,y]=(0,n.useState)(!1),[O,F]=(0,n.useState)(""),[D,w]=(0,n.useState)(!1),[T,R]=(0,n.useState)(""),[Z,V]=(0,n.useState)(""),[k,L]=(0,n.useState)(""),[U,q]=(0,n.useState)(""),[P,B]=(0,n.useState)(""),[J,Q]=(0,n.useState)(""),[_,M]=(0,n.useState)(""),[H,Y]=(0,n.useState)(""),[G,W]=(0,n.useState)(""),[K,z]=(0,n.useState)(""),[X,$]=(0,n.useState)(""),[ee,ea]=(0,n.useState)("SOLTERO"),[et,es]=(0,n.useState)("NA"),[en,ei]=(0,n.useState)(null),[el,er]=(0,n.useState)(null);async function ec(){if(""!=H){let e=(0,x.JU)(g.db,"propiedades",H),a=await (0,x.QT)(e);a.exists()&&M(a.data().folio)}}(0,n.useEffect)(()=>{null==t?E.push("/"):"vendedor"!=i?E.push("/user-validation"):"vendedor"==i&&ed()},[t,D]),(0,n.useEffect)(()=>{ec()},[H]),(0,n.useEffect)(()=>{switch(G){case"CONTADO":case"FOVISSSTE-infonavit-fovissste":case"FOVISSSTE-tradicional":case"FOVISSSTE-conyugal":case"FOVISSSTE-para-todos":case"BANCARIO-terreno":case"BANCARIO-casa":z("CURP");break;case"INFOVANIT-tradicional":case"INFOVANIT-unamos-creditos":case"INFOVANIT-conyugal":case"INFOVANIT-infonavit-fovissste":case"INFOVANIT-crediterreno":case"INFOVANIT-segundo-credito":case"INFOVANIT-cofinativ":z("NSS");break;case"IPEJAL-tradicional":case"IPEJAL-terreno":case"IPEJAL-conyugal":z("N_Afiliado")}},[G]);let eo=async()=>{if("arquima"!=T)return;let e=(0,I.v0)(),a=e.currentUser;await (0,I.gQ)(a,Z),F("Contrase\xf1a cambiada correctamente"),ex()};async function ed(){let e=(0,x.IO)((0,x.hJ)(g.db,"clientes"),(0,x.ar)("asesorID","==",t.uid)),a=await (0,x.PL)(e),s=[];a.forEach(e=>{s.push(e.data())}),er(s)}async function eu(){try{let e={nombre:k,email:U,cel:P,pago:(0,j._)(J),status:"ARMADO DE EXPEDIENTE",esquema:G,[K]:X,civil:ee,regimen_patrimonial:et,folio:_,propiedadID:H,asesor:r,asesorID:t.uid,terminos:!1,historial:[{registrado:r,fecha:x.EK.fromDate(new Date),comentario:"Registrado como cliente"}]},s=(0,x.hJ)(g.db,"clientes"),n=new x.JU(s),i=n.id,l={id:i,...e};await (0,x.pl)(n,l);let c=(0,x.JU)(g.db,"propiedades",H);await (0,x.r7)(c,{status:"ARMADO DE EXPEDIENTE",status_interno:"ARMADO DE EXPEDIENTE",asesor:r,nombre:k,esquema:G}),F("Registro exitoso"),ex(),w(!D),a("inicio")}catch(e){F(e),ex()}}let em=[{dataField:"folio",text:"Folio",sort:!0,filter:(0,N.DN)()},{dataField:"nombre",text:"Nombre",sort:!0,editable:!1,filter:(0,N.DN)()},{dataField:"esquema",text:"Esquema",sort:!0,filter:(0,N.DN)()},{dataField:"status",text:"Status",sort:!0,filter:(0,N.DN)()},{dataField:"cel",text:"Cel",sort:!0,filter:(0,N.DN)()},{dataField:"email",text:"Email",sort:!0,filter:(0,N.DN)()},{dataField:"propiedadID",text:"IDpropiedad",sort:!0,filter:(0,N.DN)()}],eh=()=>y(!1),ex=()=>y(!0);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.Z,{onClick:eh,show:C,onHide:eh,message:O,button:"aceptar"}),(0,s.jsx)("nav",{className:"navbar bg-body-tertiary sticky-top",children:(0,s.jsxs)("div",{className:"container-fluid",children:[(0,s.jsxs)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasNavbar","aria-controls":"offcanvasNavbar","aria-label":"Toggle navigation",children:[(0,s.jsx)(l(),{alt:"logo",src:m.Z,width:30,height:30}),(0,s.jsx)("span",{className:"navbar-toggler-icon"})]}),(0,s.jsx)("ul",{className:"navbar-nav ms-auto mb-2 mb-lg-0",children:(0,s.jsx)("li",{className:"nav-item",children:(0,s.jsx)("a",{children:r})})}),(0,s.jsx)("button",{type:"button",className:"btn btn-secondary ms-3",onClick:u.Z,children:"Log Out"}),(0,s.jsxs)("div",{className:"offcanvas offcanvas-start",tabIndex:"-1",id:"offcanvasNavbar","aria-labelledby":"offcanvasNavbarLabel",children:[(0,s.jsxs)("div",{className:"offcanvas-header",children:[(0,s.jsx)(l(),{alt:"logo",src:h.Z,width:150,height:60}),(0,s.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"})]}),(0,s.jsx)("div",{className:"offcanvas-body",children:(0,s.jsxs)("ul",{className:"navbar-nav justify-content-end flex-grow-1 pe-3",children:[(0,s.jsx)("li",{className:"nav-item",children:(0,s.jsx)(c(),{href:"",children:(0,s.jsx)("button",{type:"button",onClick:()=>a("registrarC"),className:"btn","data-bs-dismiss":"offcanvas",children:"Registrar Clientes"})})}),(0,s.jsx)("li",{className:"nav-item",children:(0,s.jsx)(c(),{href:"",children:(0,s.jsx)("button",{type:"button",onClick:()=>a("clientes"),className:"btn","data-bs-dismiss":"offcanvas",children:"Lista de clientes"})})}),(0,s.jsx)("li",{className:"nav-item",children:(0,s.jsx)(c(),{href:"",children:(0,s.jsx)("button",{type:"button",onClick:()=>a("password"),className:"btn","data-bs-dismiss":"offcanvas",children:"Cambiar contrase\xf1a"})})}),(0,s.jsx)("li",{className:"nav-item"})]})})]})]})}),(0,s.jsxs)("div",{className:"container-fluid text-center",children:["registrarC"==e?(0,s.jsx)("div",{className:"row justify-content-center text-center",children:(0,s.jsxs)("div",{className:"col-md-6 col-12 mt-4",children:[(0,s.jsx)(l(),{className:"img-fluid",alt:"logo",src:h.Z,width:450,height:360}),(0,s.jsx)("h3",{className:"my-3",children:"Registro de Cliente"}),(0,s.jsxs)("form",{className:"form",children:[(0,s.jsxs)("div",{className:"mb-3 mx-5",children:[(0,s.jsx)("label",{htmlFor:"nombre",className:"form-label",children:"Nombre completo"}),(0,s.jsx)("input",{type:"text",onChange:e=>L(e.target.value.toUpperCase()),value:k,name:"nombre",className:"form-control",id:"nombre",placeholder:"Nombre Completo"})]}),(0,s.jsxs)("div",{className:"mb-3 mx-5",children:[(0,s.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email"}),(0,s.jsx)("input",{required:!0,type:"email",onChange:e=>q(e.target.value),value:U,name:"email",className:"form-control",id:"email",placeholder:"name@example.com"})]}),(0,s.jsxs)("div",{className:"mb-3 mx-5",children:[(0,s.jsx)("label",{htmlFor:"cel",className:"form-label",children:"Celular - 10 digitos"}),(0,s.jsx)("input",{required:!0,type:"text",maxLength:10,onChange:e=>B(e.target.value),value:P,name:"cel",className:"form-control",id:"cel",placeholder:"Celular: 3312345678"})]}),(0,s.jsxs)("div",{className:"mb-3 mx-5",children:[(0,s.jsx)("label",{htmlFor:"pago",className:"form-label",children:"Pago inicial"}),(0,s.jsx)("input",{type:"text",onChange:e=>Q(e.target.value),value:J,name:"pago",className:"form-control",id:"pago",placeholder:"5000"})]}),(0,s.jsxs)("div",{className:"mb-3 mx-5",children:[(0,s.jsx)("p",{children:"Selecciona el Folio de la propiedad"}),(0,s.jsxs)("select",{className:"form-select",onChange:e=>{Y(e.target.value)},"aria-label":"Default select example",children:[(0,s.jsx)("option",{value:"",children:"Folio"}),en.map(e=>(0,s.jsx)("option",{value:e.id,children:e.folio},e.id))]})]}),(0,s.jsxs)("div",{className:"mb-3 mx-5",children:[(0,s.jsx)("p",{children:"Elige el esquema: "}),(0,s.jsxs)("select",{className:"form-select",onChange:e=>W(e.target.value),"aria-label":"Default select example",children:[(0,s.jsx)("option",{value:"",children:"Tipo de Tr\xe1mite"}),f.g.map((e,a)=>(0,s.jsx)("option",{value:e,children:e},a))]})]}),""!=G?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(A.Z,{tipo:K,value:X,onChange:e=>$(e.target.value.toUpperCase())}),(0,s.jsxs)("div",{className:"mb-3 mx-5",children:[(0,s.jsx)("p",{children:"Estado Civil"}),(0,s.jsxs)("select",{className:"form-select",onChange:e=>ea(e.target.value),"aria-label":"Default select example",children:[(0,s.jsx)("option",{value:"",children:"Selecciona una opci\xf3n"}),(0,s.jsx)("option",{value:"SOLTERO",children:"SOLTERO"}),(0,s.jsx)("option",{value:"CASADO",children:"CASADO"})]})]})]}):(0,s.jsx)(s.Fragment,{}),"SOLTERO"!=ee?(0,s.jsxs)("div",{className:"mb-3 mx-5",children:[(0,s.jsx)("p",{children:"R\xe9gimen Patrimonial"}),(0,s.jsxs)("select",{className:"form-select",onChange:e=>es(e.target.value),"aria-label":"Default select example",children:[(0,s.jsx)("option",{value:"",children:"Selecciona una opci\xf3n"}),(0,s.jsx)("option",{value:"SOCIEDAD LEGAL / MANCOMUNADO",children:"Sociedad legal / Mancomunado"}),(0,s.jsx)("option",{value:"BIENES SEPARADOS",children:"Bienes separados"})]})]}):(0,s.jsx)(s.Fragment,{}),(0,s.jsx)("div",{className:"my-5",children:(0,s.jsx)("button",{type:"button",onClick:eu,className:"btn btn-secondary",children:"Registrar"})})]})]})}):(0,s.jsx)(s.Fragment,{}),"clientes"==e?(0,s.jsx)("div",{className:"m-5 p-2",children:null!=el&&el.length>0?(0,s.jsx)(b.Z,{striped:!0,condensed:!0,hover:!0,keyField:"id",data:el,columns:em,pagination:(0,p.ZP)(),filter:(0,N.ZP)(),rowEvents:{onClick:(e,a,t)=>{E.push("/ventas/cliente/".concat(a.id))}}}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l(),{className:"img-fluid",alt:"engrane",src:S.Z,width:350,height:210}),(0,s.jsx)("p",{children:"Loading..."})]})}):(0,s.jsx)(s.Fragment,{}),"password"==e?(0,s.jsxs)("div",{className:"row align-items-center mb-5",children:[(0,s.jsx)("h3",{children:"Cambiar Contrase\xf1a"}),(0,s.jsxs)("div",{class:"mb-3",children:[(0,s.jsx)("label",{for:"pass",class:"form-label",children:"Nueva contrase\xf1a:"}),(0,s.jsx)("input",{type:"password",onChange:e=>V(e.target.value),class:"form-control",id:"pass"})]}),(0,s.jsxs)("div",{class:"mb-3",children:[(0,s.jsx)("label",{for:"token",class:"form-label",children:"Token:"}),(0,s.jsx)("input",{type:"password",onChange:e=>R(e.target.value),class:"form-control",id:"token"})]}),(0,s.jsx)("button",{type:"button",onClick:eo,class:"btn btn-primary",children:"Cambiar Status Interno"})]}):(0,s.jsx)(s.Fragment,{})]})]})}},1435:function(e,a,t){"use strict";t.d(a,{Z:function(){return n}});var s=t(7437);function n(e){return(0,s.jsxs)("div",{className:"mb-3 mx-5",children:[(0,s.jsx)("label",{htmlFor:"docEsquema",className:"form-label",children:e.tipo}),(0,s.jsx)("input",{type:"text",onChange:e.onChange,value:e.value,name:"docEsquema",className:"form-control",id:"docEsquema",placeholder:e.tipo})]})}t(2265)},8591:function(e,a,t){"use strict";var s=t(7437);t(2265);var n=t(1577),i=t(9699),l=t(3572),r=t(6691),c=t.n(r);a.Z=function(e){return(0,s.jsxs)(i.Z,{centered:!0,show:e.show,onHide:e.onHide,children:[(0,s.jsx)(i.Z.Header,{closeButton:!0,children:(0,s.jsx)(i.Z.Title,{children:(0,s.jsx)(c(),{className:"img-fluid",alt:"logoA",src:n.Z,width:150,height:150})})}),(0,s.jsx)(i.Z.Body,{children:(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)("p",{children:e.message})})}),(0,s.jsx)(i.Z.Footer,{children:(0,s.jsx)(l.Z,{variant:"secondary",onClick:e.onClick,children:e.button})})]})}},2781:function(e,a,t){"use strict";t.d(a,{Eu:function(){return x},HD:function(){return f}});var s=t(7437),n=t(2265),i=t(3085),l=t(2827),r=t(4086),c=t(9942),o=t(9817),d=t(6691),u=t.n(d);let m=(0,i.v0)(l.Z),h=n.createContext({}),x=()=>n.useContext(h),f=e=>{let{children:a}=e,[t,d]=n.useState(null),[x,f]=n.useState(!0),[g,b]=n.useState(""),[p,N]=n.useState(""),[v,j]=n.useState(""),[A,S]=n.useState(null),[I,E]=n.useState(null);async function C(){try{let e=(0,r.JU)(l.db,"empleados",t.uid),a=await (0,r.QT)(e),s=a.data();S(s.rol),E(s.nombre)}catch(e){console.log(e)}}return n.useEffect(()=>{let e=(0,i.Aj)(m,e=>{e?(d(e),C()):d(null),f(!1)});return()=>e()},[t]),(0,s.jsx)(h.Provider,{value:{user:t,name:g,cel:p,rol:v,changeName:e=>{b(e)},changeCel:e=>{N(e)},changeRol:e=>{j(e)},currentRol:A,userDB:C,currentName:I},children:x?(0,s.jsxs)("div",{className:"container-sm text-center my-5 align-items-center",children:[(0,s.jsx)("div",{children:(0,s.jsx)(u(),{className:"img-fluid",alt:"logo",src:c.Z,width:600,height:460})}),(0,s.jsxs)("div",{children:[(0,s.jsx)(u(),{className:"img-fluid",alt:"engrane",src:o.Z,width:350,height:210}),(0,s.jsx)("p",{children:"Loading..."})]})]}):a})}},8686:function(e,a,t){"use strict";t.d(a,{Z:function(){return l}});var s=t(2827),n=t(3085);let i=(0,n.v0)(s.Z);async function l(){try{await (0,n.w7)(i)}catch(e){}}},2827:function(e,a,t){"use strict";t.d(a,{db:function(){return r},t:function(){return c}});var s=t(994),n=t(4086),i=t(9584);let l=0===(0,s.C6)().length?(0,s.ZF)({apiKey:"AIzaSyAu3uaivU4_dcmDipBtrqr59jCSC5EQY0I",authDomain:"arquimainfsys.firebaseapp.com",projectId:"arquimainfsys",storageBucket:"arquimainfsys.appspot.com",messagingSenderId:"220334849818",appId:"1:220334849818:web:d65e267b0a726f9f5e36a3"}):(0,s.C6)()[0];a.Z=l;let r=(0,n.ad)(l),c=(0,i.cF)(l)},8775:function(e,a,t){"use strict";t.d(a,{_:function(){return s}});let s=e=>{let a=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),t=a.format(e);return t}},7829:function(e,a,t){"use strict";t.d(a,{g:function(){return s}});let s=["CONTADO","FOVISSSTE-infonavit-fovissste","FOVISSSTE-tradicional","FOVISSSTE-conyugal","FOVISSSTE-para-todos","INFOVANIT-tradicional","INFOVANIT-unamos-creditos","INFOVANIT-conyugal","INFOVANIT-infonavit-fovissste","INFOVANIT-crediterreno","INFOVANIT-segundo-credito","INFOVANIT-cofinativ","IPEJAL-tradicional","IPEJAL-terreno","IPEJAL-conyugal","BANCARIO / caja popular -terreno","BANCARIO / caja popular -casa"]},1577:function(e,a){"use strict";a.Z={src:"/_next/static/media/ArquimaA.ece3c345.png",height:1433,width:1662,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAQAAACfUMTVAAAAT0lEQVR42h3Juw1AUAAAwPNbQSESSolWYwQNLYXeHoZQS8QKWjaTvPJykGIyIoEIscspCwq/+rxmghRuu8MjBxYtGGzQqBGL0OmpAiFB+QNMYgkF9SW18wAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:7}},9942:function(e,a){"use strict";a.Z={src:"/_next/static/media/ArquimaLogo.0f6754b6.png",height:1433,width:3416,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAQAAAAEwYbDAAAANUlEQVR42g3DMQqAIAAAwIMo6AOBFD3Bhzg4uomDu+D/Fz04aDJup8vBYxqSru6FH0SvTxAWanoEMnhCkAoAAAAASUVORK5CYII=",blurWidth:8,blurHeight:3}},9817:function(e,a){"use strict";a.Z={src:"/_next/static/media/engranes.0bcfd619.gif",height:240,width:320,blurWidth:0,blurHeight:0}}},function(e){e.O(0,[358,413,986,943,396,954,545,971,596,744],function(){return e(e.s=8535)}),_N_E=e.O()}]);